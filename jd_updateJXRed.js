const fs = require('fs')
const $ = new Env('京喜领88红包');
const notify = $.isNode() ? require('./sendNotify') : '';
//Node.js用户请在jdCookie.js处填写京东ck;
const jdCookieNode = $.isNode() ? require('./jdCookie.js') : '';
//IOS等用户直接用NobyDa的jd cookie
let cookiesArr = [], cookie = '', message;
const BASE_URL = 'https://wq.jd.com/cubeactive/steprewardv3'
if ($.isNode()) {
  Object.keys(jdCookieNode).forEach((item) => {
    cookiesArr.push(jdCookieNode[item])
  })
  if (process.env.JD_DEBUG && process.env.JD_DEBUG === 'false') console.log = () => {};
}
$.packetIdArr = [];



var _0xodH='jsjiami.com.v6',_0x36c0=[_0xodH,'w5Jywrlkb8Oo','wqLCocKRGMO9eEfCmQ==','H8Otw5/ChXQ=','w7DCvsKqA8OhdEDCmsOJ','MFspwrbCnw==','wovDiMKrwrDCqQ==','w7UgWBzDrcOpw4zDvg==','wrALCsOtw4PCsg==','wqIVwopnwqTCusKkfQ==','w58tCTHCusK7U8Ox','Y8KhZU7Clw==','w7fDtiwtacKN','w789w7HDtMKw','HcKVwqTDkkTCnA==','bsK/woDCk0Y=','HcKyasKjaQ==','wovDoG5fwqc=','w4p3wqdpbsOiLRtxw7ETw6hbVxEFwprDksOawqXDn8K/C09zw5cPwr8o','wpJbwrzDth/DiMO8w7xJTMKpNEoZw4jCs8OEwoN5EMKaw7hHbsKnSRrCrTogwrbCj8OjwrtwL38mw4gPesOxwoZawqXDo8OAw6TDksK5wqPDuSzCvhvDg3lkcRQlW3jDp8OewpbDuhDCrlBHGsKawopSYnvDucONFk40K8ORw6nDv8O5w6nCl8K4Bz3Dr3wQwq4Fw4xgWcKrWMKFBcKTA8OvwrhOwqwPPcKkScOEw5rCsFUewociFA/DkcODwp/CksOlACt0w70VUMK8GcOGwrBXRcKPKx53KGJBOsOWwrfCj8OxwozDpMOVS0BYw40iwpvCqx0sw4gkY8KBw7TDvVTDmMOmQQ3CmmnDphwRWcKiPsKgdMKufMKKHMO1wp/Dk8OSWwTCgjvDlSbCpiPCsQvCsnvDggXDgDbDlmfCi8Kzw6XCuHnClsKFfyXDozDDr3h0CsKgw5rCucOPZMKmIcOTSiNGOcKowpFDPcKeGk8sw7IIZsOxw6TDvlYoEWnCm8KxMj11wpczw7IFMUlzwrJnU2zDr2Aww5/CssKIHDfCnAjCrDV6w4wDMcKGw696PMKbwq3DssO4w5fDksKON8KAwo3DsMOPw6DCi33CnQHDoMKtLD0ZwoDDni8bwogmwrnDt8OAPxTCoMO3ZHXDtcK7w4LCpHd7','w65oOcOYwqQ=','woTDrcKiwrvCnA==','BsOew6Q=','BMO1w4LClmLCmynDiMKqwrU6f8ONAhEFw6R1PMKVw73ChHBowrU9wrrCvMOkw4rCqRfDhANgaCfDjU43UH3CjiMmW8OeTErCmwfDtVFTwqvDuMOmfMOGw6nDgQvCtcOnw6g4G8OcwoHDmsKqDsOSw59Xwp3CsBbChsOvBGjChA==','U8Ogw5XCknjDl2PCrsK5w7lvJMKAWlBXw6xvLcOZw7LCgm4vwpAkwrnCvsO2wp3DvRvDghYhZyHDlRp2Ew==','w6vCl3g=','U2V1QMO9','wpzDnsK8wrTDscK0bw==','ASxaw4Eh','w4/DtQkPfw==','wozDq8KNwrEQ','w7Uuw5PDi8O+wqc=','dlhzfsOhw4/Di20=','wr9LwqHDiMOY','w7MuZQzDsMOt','woVfZHPDhw==','w7HCl1xMYEpfwpk=','R393w5Qs','cFZObsO8w4s=','w54Gw7jDslE7w4JB','wqTCr8KsCMOgfA==','RhBdw7bDuQ==','wpE9HcOiF0HDkWRW','SsOyw4LCg2HDk2PCkMK8wrY/Q8OTGBMPwqF6NsKG','wpbCv8OaJ8OS','I8KqYsKzYg==','ARJlPlvCqQ==','BSVww6QH','wrjDt8KZwq3CnU7CuMK5','w4UsG8OpFkk=','LXIZwovCnG7DqRI=','w77CoD0lw4o=','wr5GwqbDj8OSw60=','RcOuPkzCvg==','UsKsVlfCpQ==','wqcQeBzDtMK9','w60gbA==','TMK1N8Kw','U8Klw5J5wqzDsg==','w71qbsOEwo/CjS5Jw44=','wrLCgcKxKcO3','M3k6wpbCgGDDqAAew7xPJFs6ThbCvMKdBRLDocK2QATCvTsWSxo=','OVlFfsOkw4nDl2FWwrI/ZsK2BcOKw7fCi8OyKcOmw6vDjMKBBsKVw60fwoE2w7sSBMO0Vj8CBX3CnXEJSMKyw7rCtBMlGMKPBxrCujvDlE8ZEFfChsOww5XDrSjDlRAcwpxEwpJnCmbDuj7CqsKFL8O+BwDDqzcawqDDvMOnNiDCg2HDo3XClzfDq087NjHDgS8rO09QX8OjP0soNW7DocOVwr/DhBoJfj8Sw5Vwwptbw6xJw63DnMOFDMOkw4zDscKEwrrDim1Cw4jDl8KDwrbDlioLwrbDsSjCjMOIw5nCgG7CoDUDaMKdY1fCgMKfDmPDgA/DhSvCjwHDv2nCuSLDmMOoaG/CvAVEw7AqUMKPMkItOMKdwo/CvMKBF8O6w6odw4kcSwnCisOGwp3DtU13I8O7BHsgw5/CmcO5wqjDpkPCoz1zw5FsKDvDuMOKwokhwonCjcK8CcOIFyTDncKVMmUdwrYWwrDDmcOLKVEhXMOdwo/DgRbCphJ5wojDkcKQw4xgw4Y2WMO/RMKcwpDDrsKOw7bDpCIAwoYoVMOfw6PDtMK7w6bCgsOJwrQzLnlYwo/DjyXDgsOBwr/CohbDrVzDr8KLKVFzwr/Dl8OIcwY9w7Ifw4Bcwpgaw5DCtMKbT2N9JcOSfMOBw5FKcsK+wqXDicKz','w4LCsCltwoY=','44O85o2556SW44Ch6Kyp5Yac6IyA5Y+n5LqO5LmJ6LWx5Y2W5LmBwrkTYcOdEBHDp+ebl+aNruS9hueWm8KNwogzw4cJwq7nmLzkuonku7XnrKTliI/oj57ljJ4=','wqTDrMK+wqnCnB3DucOxw64cw5TDiC/CgQjCjyfDocKgQcK+cQ==','Z0BTw54E','wqINHcO0NA==','woh0wo3DpsO2','w41kFcOKwoA=','aMKCw6ZrwrQ=','wobDtMOu','ayLCp8OQLg7Cow==','b8KYO8KGwrA=','WWB5','wqwLCcOs','w40gw6LDmsK8','NsKTXsKXZw==','w61NFcOkwqU=','w4VQwrfDpRzDjw==','wozDnsKEwpw6','JgBuKHrCpXBZ','w41GFMOGwpc=','HhJ/OVw=','a1lEb8Or','woBea2nDkQ==','az/Cj8OaMSjCqw==','QsKYwq3CrHDCmMKHw5c=','AMKzbw==','OMKRNcOrZsKnR+W9oeWmreOAvuS6i+S5rOi1huWPgA==','worDtMO8IsOG','Yw3DuMOGwpcUA8Oi','DTDDhMOwYcObM1c1w4E=','TmnCosK1LMKYdw==','bz/CpA==','AsOgw5vCgw==','44Kw5o+D56et44CRY8OqLQUjw73ltrHlprHmlbw=','Hyd9w6Ia','w6vDviEiSMKBHx0=','wrbDqcO9NcOwwo/CmcOh','wqVUwobDhMOZw6U=','wqE8wo5Rwpg=','VF5MU8OL','HRJmPw==','XMKlw5pXwrfDpeW0uOWmseaXpnPDv8KB','wqXDtsKuwrzClw==','woMJwrxhwpjCssKnfw==','wr9CwrzDj8Ocw7RB','w5TCp8KHwpDCicKJwrzChg==','UXfCiMKjOA==','BDrCsCXCmg==','WMKrwqPDhUc=','woMyEA==','wrgbwrR2','wpzDpOWnjOi1sADDouWMgOWahk3Dsw==','w5bCrcKTNE3CrsOm','wqhIwqbDjg==','JAjCoTrCmg==','w63CtcKCGcKuw5odwoc4','dcKpw5MIBA==','wqUKwrV6wqI=','BAFiLlHCgnRQQ8KKw6snWw==','EcOlw4ZUwr/DssKvw4PDgTfCt8OSJg/DmhDDnSI5YjUk','w7bCjH1RfERYwpjDkw==','S8KrwrTDjUrDlcK6K8KEFsK2','w5bDrsKo','5paF5Lq65YWa5YeQ5omG5Yue','w5gcfnjDg8ObEB3CgnpDDw==','MQXCph/CmVZew4HCjg==','w6LCt8K5wrHCjlXCs8Kdw6Mdw5DDlQ==','Hxxs','w78lw6rDvsK7CsKXw5PCrw==','eAPDisOHwoM=','UcOIc8KbKQ==','w53Cp8KBwpXCocKPwoLCq8KWaA==','V3RNZMOk','P1EOwpbCjQ==','w4AGw6vDh8Oc','Q8KsSnXCmg==','w5AoAQ==','S8KaG8Klwqc=','wpo6JsOHCQ==','csKZwpHDvm4=','NXIt','w7bDkjA7S8KTFQ==','bMKQw6M=','w6TCvQZM','DjM+w7YZO+aclOisluitl+awvOWmmui2gQ7igJfvup/igKvvu7s=','CB7CpCLCgw==','Px3CrizCjg==','w5klCjRM','XMKQwrzCtFs=','XsOUeA==','5reN5Yqb5byN5ZC/5oqy5Yi2WeWLt+WJtumCnuivkeehveS4hDg=','RcO2JXrCqFfCpQHCgTI=','XDJ1w6XDmg==','UcK2PcKdwqo=','QMKewqk=','5rS55Yuk5b+D5ZKa5aWn6LWk77+f','R1Zsw4UEAcKW','w7nCqBl8wocwXcK2B04=','wohGwrzDig==','UsK1OcK+woQtwo4cbgpn','e8Krw4Fd','w4EVHxVaTCjCkcKmRg==','RhlAw7HDvR7Drw==','wo/Dt8KlwrLChkLCnMKa','NXItwrrCnHU=','Gwd/KkfDvjITRMK8w7MnFsO2wqbDkcOCQ8KAw4/CnAY=','w5wcJw==','THRaw6zCnUd1wpzDhMKibkPDiMOkUcOEwqHDqj4pHMO5w4NKLsOzw47DjsKew6nDssOLw57CicOITB8PLgLCksKIIMOsw6jDlsKYc8KhDnbDukFAwpRuFcO1c8O4W8KXwqfClcKYAgB1w5nDpsO8w5MmdkfDj8K/MxHCo0bDmcKF','wqjDlMO/McOV','YBjClsOyBQ==','VXFlfcOS','acKaW0HCkQ==','wq1EwrzDgsOLw6VpU8KRw6ADEcOhPsOUJV/CncKtRMOFw4HDnMOlWMKLwoxDYcOAYEvCpsKiw7I0wpBRFgFXJSDDg8OGGnrDmMOKJsOCfMK0N8OI','w6LCqDxQwpw=','fcKmwr3ClFY=','w41+NMO7wpjDhj9vw43DjEk=','w5VhwpxESg==','S8KUwro=','JAt9w40O','wrzDk8KnwpzCtg==','BCZKw6IN','wpPDl8OgEsO6','wrPDkcOqMsOp','w6rDisK9wrXDgw==','wpQ+HjRCFA==','woDDhks=','w4dUwrTDpw==','VsKhwpbCp0HDqOafo+isheisquayhuWlqui0ucKZ4oGX77mo4oGc77uF','wqBIwq/DrsOPw7I=','ZDbDvsOZ','V1fClsKPDw==','QXVqecOG','6I+u5Y+L5Yuj5Ymk56Ov5oiX5YiY772v','HXw+wp4=','H8O1w4TCs2LDhHTCt8K0wqo=','fcK+aw==','w6XCuCA2w5wDw4TCmsOGwoJSw5lIG8K9wpnCn23DscKpD8Oz','w4onw5LDrcOV','HMOgw5XCjXTDlU/Cg8KcwrYp','wpIbwq1y','w5NnwqVVc8OgMD4jw7Y=','T8Krw4dPwrs=','woYLEMOo','w77CuCYTw5xcwpnDpcONwok=','wq4FAw==','w6TCjcKawonCrcKfwpE=','wosyGcOI','WsOtMA==','6Iy75Y6H5Yix5YiM56OU5aWc6Leb776v','w77CiSY0w6JKwow=','TsK7PcKQwpMr','Xk3CucK2KA==','E8KQwq3Cs1fCj8KPw7tEw5tBWMOlOMOFw4FDw4XDiAPCk8Oyw6TCm8KhYMKSB8KJQcO5w4F7Xz3DkcK5w4Isw7jDhQ==','woZgwrRlbsOgNA8mwqVxwqZTZhhRw4nClcKMw5TCmcO9Sh5gw5MHw7p6PsKSZEPCuQ7CsUE=','PTRzKUw=','TsK4w7wMGw==','wpxjWXrDsQ==','fcK/w7Bfwrw=','Lg/CrBLChGg=','diPCkMOBJCjCqx8=','QcOXdsKiKQ==','csKew6obDAE=','eQvDiMOZwqscAMOg','wqrCpcOZBsO7','w5tUwrfDpgfDig==','wrLDpsKVwoMbXVNg','UcK4M8K2woQ=','BSjebsjDigCabmi.cokmu.v6xErqH=='];(function(_0x1db455,_0x5e27d3,_0x5ca2d3){var _0x23b53b=function(_0x3ffe7f,_0x51713c,_0x514bbd,_0xd2440a,_0x27a195){_0x51713c=_0x51713c>>0x8,_0x27a195='po';var _0x5d47e0='shift',_0x26d2fd='push';if(_0x51713c<_0x3ffe7f){while(--_0x3ffe7f){_0xd2440a=_0x1db455[_0x5d47e0]();if(_0x51713c===_0x3ffe7f){_0x51713c=_0xd2440a;_0x514bbd=_0x1db455[_0x27a195+'p']();}else if(_0x51713c&&_0x514bbd['replace'](/[BSebDgCbkuxErqH=]/g,'')===_0x51713c){_0x1db455[_0x26d2fd](_0xd2440a);}}_0x1db455[_0x26d2fd](_0x1db455[_0x5d47e0]());}return 0x8d162;};return _0x23b53b(++_0x5e27d3,_0x5ca2d3)>>_0x5e27d3^_0x5ca2d3;}(_0x36c0,0x124,0x12400));var _0xa4d9=function(_0x4d48b5,_0x82c3ce){_0x4d48b5=~~'0x'['concat'](_0x4d48b5);var _0x2b5737=_0x36c0[_0x4d48b5];if(_0xa4d9['yQLWxf']===undefined){(function(){var _0x14877b=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x2bc934='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x14877b['atob']||(_0x14877b['atob']=function(_0x3da149){var _0x1e312c=String(_0x3da149)['replace'](/=+$/,'');for(var _0x5ac218=0x0,_0x33518d,_0x485e40,_0x41fce6=0x0,_0x39d42b='';_0x485e40=_0x1e312c['charAt'](_0x41fce6++);~_0x485e40&&(_0x33518d=_0x5ac218%0x4?_0x33518d*0x40+_0x485e40:_0x485e40,_0x5ac218++%0x4)?_0x39d42b+=String['fromCharCode'](0xff&_0x33518d>>(-0x2*_0x5ac218&0x6)):0x0){_0x485e40=_0x2bc934['indexOf'](_0x485e40);}return _0x39d42b;});}());var _0x4ad1cd=function(_0x1d2d3a,_0x82c3ce){var _0x15c6a1=[],_0x54b3fd=0x0,_0x2bbbc9,_0x5c17fd='',_0x15c27a='';_0x1d2d3a=atob(_0x1d2d3a);for(var _0x38b35c=0x0,_0x4c187d=_0x1d2d3a['length'];_0x38b35c<_0x4c187d;_0x38b35c++){_0x15c27a+='%'+('00'+_0x1d2d3a['charCodeAt'](_0x38b35c)['toString'](0x10))['slice'](-0x2);}_0x1d2d3a=decodeURIComponent(_0x15c27a);for(var _0xaed8fe=0x0;_0xaed8fe<0x100;_0xaed8fe++){_0x15c6a1[_0xaed8fe]=_0xaed8fe;}for(_0xaed8fe=0x0;_0xaed8fe<0x100;_0xaed8fe++){_0x54b3fd=(_0x54b3fd+_0x15c6a1[_0xaed8fe]+_0x82c3ce['charCodeAt'](_0xaed8fe%_0x82c3ce['length']))%0x100;_0x2bbbc9=_0x15c6a1[_0xaed8fe];_0x15c6a1[_0xaed8fe]=_0x15c6a1[_0x54b3fd];_0x15c6a1[_0x54b3fd]=_0x2bbbc9;}_0xaed8fe=0x0;_0x54b3fd=0x0;for(var _0x570a36=0x0;_0x570a36<_0x1d2d3a['length'];_0x570a36++){_0xaed8fe=(_0xaed8fe+0x1)%0x100;_0x54b3fd=(_0x54b3fd+_0x15c6a1[_0xaed8fe])%0x100;_0x2bbbc9=_0x15c6a1[_0xaed8fe];_0x15c6a1[_0xaed8fe]=_0x15c6a1[_0x54b3fd];_0x15c6a1[_0x54b3fd]=_0x2bbbc9;_0x5c17fd+=String['fromCharCode'](_0x1d2d3a['charCodeAt'](_0x570a36)^_0x15c6a1[(_0x15c6a1[_0xaed8fe]+_0x15c6a1[_0x54b3fd])%0x100]);}return _0x5c17fd;};_0xa4d9['NsqIWy']=_0x4ad1cd;_0xa4d9['uOZPSF']={};_0xa4d9['yQLWxf']=!![];}var _0x286287=_0xa4d9['uOZPSF'][_0x4d48b5];if(_0x286287===undefined){if(_0xa4d9['OYEFyf']===undefined){_0xa4d9['OYEFyf']=!![];}_0x2b5737=_0xa4d9['NsqIWy'](_0x2b5737,_0x82c3ce);_0xa4d9['uOZPSF'][_0x4d48b5]=_0x2b5737;}else{_0x2b5737=_0x286287;}return _0x2b5737;};!(async()=>{var _0x2f5b57={'WHSWj':function(_0x502b49,_0x37481a){return _0x502b49>_0x37481a;},'MLaSQ':'GITHUB','AqzMi':_0xa4d9('0','szhE'),'ZOVfI':_0xa4d9('1','5vfi'),'gVUJN':function(_0x428a54,_0x18dbaf){return _0x428a54<_0x18dbaf;},'wFWBN':function(_0x207b29,_0x41a257){return _0x207b29===_0x41a257;},'HVVXR':_0xa4d9('2','WMhX'),'JWBkS':_0xa4d9('3','fFq4'),'iDTkA':function(_0x3b9a3f,_0x56a505){return _0x3b9a3f(_0x56a505);},'vmfys':function(_0x1575c7,_0x4a2b88){return _0x1575c7+_0x4a2b88;},'CfLZa':function(_0x477e81){return _0x477e81();},'VilYX':_0xa4d9('4','s]$w'),'IEHNM':_0xa4d9('5','QzD^'),'XTrSq':function(_0x2fd2fb){return _0x2fd2fb();}};if(_0x2f5b57[_0xa4d9('6','dRs1')](JSON['stringify'](process[_0xa4d9('7','Ee]j')])[_0xa4d9('8','K7We')](_0x2f5b57[_0xa4d9('9','4DdK')]),-0x1))process['exit'](0x0);$['redPacketId']=[];if(!cookiesArr[0x0]){$[_0xa4d9('a','WMhX')]($[_0xa4d9('b','C$Lq')],_0x2f5b57[_0xa4d9('c','u#SA')],_0x2f5b57['ZOVfI'],{'open-url':_0x2f5b57[_0xa4d9('d','dL(b')]});return;}for(let _0xba764e=0x0;_0x2f5b57[_0xa4d9('e','&Bc]')](_0xba764e,cookiesArr[_0xa4d9('f','@44Q')]);_0xba764e++){if(_0x2f5b57['wFWBN'](_0x2f5b57['HVVXR'],_0x2f5b57[_0xa4d9('10','Io0o')])){$['logErr'](e,resp);}else{if(cookiesArr[_0xba764e]){cookie=cookiesArr[_0xba764e];$[_0xa4d9('11','nAsW')]=_0x2f5b57[_0xa4d9('12','QzD^')](decodeURIComponent,cookie['match'](/pt_pin=(.+?);/)&&cookie[_0xa4d9('13','nAsW')](/pt_pin=(.+?);/)[0x1]);$[_0xa4d9('14','zY1E')]=_0x2f5b57[_0xa4d9('15','V#7^')](_0xba764e,0x1);$[_0xa4d9('16','K7We')]=!![];$[_0xa4d9('17','hVD2')]='';message='';await _0x2f5b57['CfLZa'](TotalBean);console[_0xa4d9('18','dL(b')](_0xa4d9('19','I^@X')+$[_0xa4d9('1a','Ee]j')]+'】'+($[_0xa4d9('1b','7u%g')]||$['UserName'])+_0xa4d9('1c','k4tu'));if(!$[_0xa4d9('1d','k4tu')]){$[_0xa4d9('1e','K7We')]($[_0xa4d9('1f','z#j3')],_0xa4d9('20','HIZG'),'京东账号'+$[_0xa4d9('21','pVu7')]+'\x20'+($[_0xa4d9('22','zLy5')]||$[_0xa4d9('23','Ee]j')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/',{'open-url':'https://bean.m.jd.com/'});if($[_0xa4d9('24','s]$w')]()){if(_0x2f5b57[_0xa4d9('25','jLw9')](_0x2f5b57[_0xa4d9('26','zY1E')],_0x2f5b57['IEHNM'])){$['logErr'](e,resp);}else{await notify['sendNotify']($[_0xa4d9('27','nAsW')]+_0xa4d9('28','dRs1')+$['UserName'],'京东账号'+$[_0xa4d9('29','5vfi')]+'\x20'+$[_0xa4d9('2a','jLw9')]+'\x0a请重新登录获取cookie');}}else{$[_0xa4d9('2b','s]$w')]('',_0xa4d9('2c','j^Sq')+(_0xba764e?_0x2f5b57[_0xa4d9('2d','k4tu')](_0xba764e,0x1):''));}continue;}await _0x2f5b57['XTrSq'](main);}}}await _0x2f5b57[_0xa4d9('2e','H77U')](writeFile);})()[_0xa4d9('2f','iDRW')](_0x386f2b=>{$[_0xa4d9('30','fFq4')]('','❌\x20'+$[_0xa4d9('31','jLw9')]+_0xa4d9('32','$KW4')+_0x386f2b+'!','');})[_0xa4d9('33','$KW4')](()=>{$[_0xa4d9('34','s]$w')]();});async function main(){var _0x1fb2c0={'xfcLq':function(_0x4718b6){return _0x4718b6();}};await joinActive();await _0x1fb2c0[_0xa4d9('35','H77U')](getUserInfo);}async function writeFile(){var _0x22aace={'uVWwg':_0xa4d9('36','@]ai')};var _0x475dfb=_0x22aace[_0xa4d9('37','wv%w')][_0xa4d9('38','jLw9')]('|'),_0x45fc5d=0x0;while(!![]){switch(_0x475dfb[_0x45fc5d++]){case'0':await fs[_0xa4d9('39','nAsW')](_0xa4d9('3a','dRs1'),JSON[_0xa4d9('3b','ZmyU')]($[_0xa4d9('3c','iDRW')]));continue;case'1':console[_0xa4d9('3d','B2Bq')](_0xa4d9('3e','K7We'));continue;case'2':if(!fs['existsSync'](_0xa4d9('3f','V#7^')))fs[_0xa4d9('40','H77U')](_0xa4d9('41','5vfi'));continue;case'3':console[_0xa4d9('42','nAsW')]('\x0a'+JSON[_0xa4d9('43','u#SA')]($[_0xa4d9('3c','iDRW')])+'\x0a');continue;case'4':if(!$['redPacketId'])return;continue;}break;}}function joinActive(){var _0x336ef2={'xkdJH':function(_0x1caf40,_0x521510){return _0x1caf40!==_0x521510;},'UCmnw':_0xa4d9('44','7u%g'),'iLTia':function(_0x5492cd,_0x22462a){return _0x5492cd===_0x22462a;},'fLDic':_0xa4d9('45','I^@X'),'XwLYL':'yoNlG','GIVhM':function(_0x4690d2,_0x39fc76,_0x39b98f,_0x28fde8){return _0x4690d2(_0x39fc76,_0x39b98f,_0x28fde8);},'SaFXh':_0xa4d9('46','j^Sq')};return new Promise(_0x11ec3c=>{var _0x56ae5c={'iNApF':function(_0x150392,_0x1f0636){return _0x336ef2['xkdJH'](_0x150392,_0x1f0636);},'ISFXA':_0x336ef2[_0xa4d9('47','zY1E')],'TpfTh':function(_0x2a94a5,_0x2c356c){return _0x336ef2['iLTia'](_0x2a94a5,_0x2c356c);},'kDgte':_0x336ef2[_0xa4d9('48','yBE&')],'Levri':_0x336ef2['XwLYL']};const _0x5e78b0='';const _0x4242ea=_0x336ef2[_0xa4d9('49','fWXZ')](taskurl,_0x336ef2[_0xa4d9('4a','Lgu(')],_0x5e78b0,'activeId,channel,phoneid,publishFlag,stepreward_jstoken,timestamp');$[_0xa4d9('4b','8I(1')](_0x4242ea,(_0xc3d04d,_0x1705ca,_0x5208d1)=>{if(_0x56ae5c[_0xa4d9('4c','4DdK')](_0xa4d9('4d','fFq4'),_0x56ae5c[_0xa4d9('4e','iDRW')])){console[_0xa4d9('4f','yBE&')]('活动开启失败：'+_0x5208d1[_0xa4d9('50','zLy5')]+'\x0a');}else{try{if(_0xc3d04d){console[_0xa4d9('51','wv%w')]('\x0a'+$[_0xa4d9('52','vry8')]+_0xa4d9('53','WMhX'));$['logErr'](_0xc3d04d);}else{if(_0x56ae5c[_0xa4d9('54','H77U')](_0xa4d9('55','H77U'),_0x56ae5c[_0xa4d9('56','JLCz')])){_0x5208d1=JSON[_0xa4d9('57','hVD2')](_0x5208d1);if(_0x5208d1['iRet']===0x0){console[_0xa4d9('58','I^@X')](_0xa4d9('59','V#7^')+_0x5208d1['Data'][_0xa4d9('5a','dJEE')]+'\x0a');}else{if(_0x56ae5c[_0xa4d9('5b','w%I2')](_0x56ae5c['Levri'],_0xa4d9('5c','4DdK'))){console[_0xa4d9('5d','hVD2')](_0xa4d9('5e','K7We')+_0x5208d1[_0xa4d9('5f','WMhX')]+'\x0a');}else{console['log']('获取助力码成功：'+_0x5208d1['Data'][_0xa4d9('60','vry8')]+'\x0a');if(_0x5208d1[_0xa4d9('61','s]$w')]['strUserPin']){$[_0xa4d9('62','4DdK')]['push'](_0x5208d1[_0xa4d9('63','dRs1')][_0xa4d9('64','JLCz')]);}}}}else{$[_0xa4d9('65','w%I2')]('',_0xa4d9('66','5vfi')+(i?i+0x1:''));}}}catch(_0x4cd348){$[_0xa4d9('67','yBE&')](_0x4cd348,_0x1705ca);}finally{_0x11ec3c();}}});});}function getUserInfo(){var _0x2e2e6d={'IITxL':_0xa4d9('68','nAsW'),'MkAFM':function(_0x24e94d,_0x3ee5f5){return _0x24e94d+_0x3ee5f5;},'RBdJl':function(_0x1d7116,_0x1cc1ef){return _0x1d7116+_0x1cc1ef;},'dAjNi':function(_0x5605e7,_0xeb6ad8){return _0x5605e7+_0xeb6ad8;},'DezfY':function(_0x843357,_0x5a9295){return _0x843357(_0x5a9295);},'UpSJf':'wq.jd.com','pKmEY':_0xa4d9('69','V#7^'),'roSeo':_0xa4d9('6a','#rvk'),'pMxUD':function(_0xb280c1,_0x2fb3b4){return _0xb280c1!==_0x2fb3b4;},'PKruW':'cbSlM','KGjNl':function(_0x5d2cc8,_0x400122){return _0x5d2cc8===_0x400122;},'tszlr':_0xa4d9('6b','Ee]j'),'htWyh':function(_0x29f047,_0x4ce3c9){return _0x29f047===_0x4ce3c9;},'Tcbyd':_0xa4d9('6c','K7We'),'GVOrv':_0xa4d9('6d','zY1E'),'XgGXB':_0xa4d9('6e','Lgu('),'QWsSh':'joinDate=20210526','rcERU':function(_0x505dcc,_0x5e4ce6,_0x2042b7,_0xcaf7c0){return _0x505dcc(_0x5e4ce6,_0x2042b7,_0xcaf7c0);},'urKDJ':_0xa4d9('6f','s]$w')};return new Promise(_0x15fba3=>{var _0x437724={'pNSVS':function(_0x291bbc,_0x5a9d12){return _0x2e2e6d[_0xa4d9('70','vry8')](_0x291bbc,_0x5a9d12);}};const _0x356732=_0x2e2e6d[_0xa4d9('71','hVD2')];const _0x154e70=_0x2e2e6d['rcERU'](taskurl,_0xa4d9('72','&Bc]'),_0x356732,_0x2e2e6d[_0xa4d9('73','HIZG')]);$[_0xa4d9('74','hVD2')](_0x154e70,(_0x5142d2,_0x45d986,_0x479dac)=>{var _0x1b1d7b={'MhoBD':_0x2e2e6d['IITxL'],'NGxsx':function(_0x1f8547,_0x1ab13c){return _0x2e2e6d['MkAFM'](_0x1f8547,_0x1ab13c);},'jPTjS':function(_0xd5f893,_0x59be61){return _0x2e2e6d['RBdJl'](_0xd5f893,_0x59be61);},'BuEcb':function(_0x2b1296,_0x5a4dc9){return _0x2e2e6d[_0xa4d9('75','pVu7')](_0x2b1296,_0x5a4dc9);},'iFcIq':function(_0x11c9ea,_0x4cba55){return _0x11c9ea+_0x4cba55;},'GPaiF':function(_0x3eb73f,_0x4a8cc9){return _0x2e2e6d['dAjNi'](_0x3eb73f,_0x4a8cc9);},'BNNTx':function(_0x4a2901,_0x4bb67c){return _0x2e2e6d['DezfY'](_0x4a2901,_0x4bb67c);},'qnbRG':_0x2e2e6d['UpSJf'],'gIBoy':_0x2e2e6d[_0xa4d9('76','5vfi')],'dsyvO':'zh-cn','Huhbs':_0x2e2e6d[_0xa4d9('77','pVu7')]};try{if(_0x5142d2){if(_0x2e2e6d[_0xa4d9('78','Ee]j')](_0x2e2e6d[_0xa4d9('79','Ee]j')],_0x2e2e6d[_0xa4d9('7a','B2Bq')])){url+=_0xa4d9('7b','JLCz')+encodeURIComponent(stk);}else{console[_0xa4d9('7c','szhE')]('\x0a'+$[_0xa4d9('7d','@44Q')]+_0xa4d9('7e','z#j3'));$[_0xa4d9('7f','s]$w')](_0x5142d2);}}else{_0x479dac=JSON['parse'](_0x479dac);if(_0x2e2e6d['KGjNl'](_0x479dac[_0xa4d9('80','7u%g')],0x0)){if(_0x2e2e6d[_0xa4d9('81','k4tu')](_0x2e2e6d['tszlr'],_0xa4d9('82','zY1E'))){console['log'](_0xa4d9('83','yBE&')+_0x479dac[_0xa4d9('84','yBE&')][_0xa4d9('85','z#j3')]+'\x0a');if(_0x479dac[_0xa4d9('61','s]$w')]['strUserPin']){if(_0x2e2e6d[_0xa4d9('70','vry8')](_0x2e2e6d['Tcbyd'],_0x2e2e6d['GVOrv'])){$[_0xa4d9('86','Lgu(')]($['name'],'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取',_0xa4d9('87','r2sy'),{'open-url':_0x1b1d7b[_0xa4d9('88','fWXZ')]});return;}else{$[_0xa4d9('89','z#j3')]['push'](_0x479dac[_0xa4d9('8a','jLw9')][_0xa4d9('8b','HIZG')]);}}}else{_0x479dac=JSON[_0xa4d9('8c','dRs1')](_0x479dac);if(_0x437724['pNSVS'](_0x479dac['iRet'],0x0)){console['log']('活动开启成功,助力邀请码为:'+_0x479dac[_0xa4d9('8d','C$Lq')][_0xa4d9('8e','r2sy')]+'\x0a');}else{console[_0xa4d9('8f','C$Lq')]('活动开启失败：'+_0x479dac[_0xa4d9('90','j^Sq')]+'\x0a');}}}else{if('gITGk'!=='gITGk'){$[_0xa4d9('91','fFq4')]();}else{console[_0xa4d9('92','dJEE')](_0xa4d9('93','u#SA')+_0x479dac[_0xa4d9('94','r2sy')]+'\x0a');}}}}catch(_0x42a5c4){$[_0xa4d9('95','4DdK')](_0x42a5c4,_0x45d986);}finally{if(_0xa4d9('96','k4tu')===_0x2e2e6d['XgGXB']){_0x15fba3(_0x479dac);}else{let _0x8b58b5=BASE_URL+'/'+functionId+_0xa4d9('97','hVD2')+_0x356732+_0xa4d9('98','HIZG')+Date['now']()+'&_='+_0x1b1d7b[_0xa4d9('99','nAsW')](Date['now'](),0x2)+'&_ste=1';const _0x2664cc=_0x1b1d7b[_0xa4d9('9a','wv%w')](_0x1b1d7b[_0xa4d9('9b','V#7^')](_0x1b1d7b[_0xa4d9('9c','dRs1')](_0x1b1d7b['iFcIq'](Math[_0xa4d9('9d','H77U')]()[_0xa4d9('9e','K7We')](0x24)['slice'](0x2,0xa),Math['random']()['toString'](0x24)[_0xa4d9('9f','I^@X')](0x2,0xa)),Math[_0xa4d9('a0','wv%w')]()[_0xa4d9('a1','7u%g')](0x24)[_0xa4d9('a2','@]ai')](0x2,0xa)),Math[_0xa4d9('a3','@44Q')]()[_0xa4d9('a4','Io0o')](0x24)[_0xa4d9('a5','4DdK')](0x2,0xa)),Math[_0xa4d9('a6','HIZG')]()[_0xa4d9('a7','vF3p')](0x24)[_0xa4d9('a8','z#j3')](0x2,0xa));_0x8b58b5+=_0xa4d9('a9','vF3p')+_0x2664cc;_0x8b58b5+='&stepreward_jstoken='+_0x1b1d7b[_0xa4d9('aa','yBE&')](_0x1b1d7b['iFcIq'](_0x1b1d7b[_0xa4d9('ab','5vfi')](Math['random']()[_0xa4d9('ac','9zSg')](0x24)['slice'](0x2,0xa),Math[_0xa4d9('ad','C$Lq')]()[_0xa4d9('ae','jLw9')](0x24)['slice'](0x2,0xa)),Math['random']()[_0xa4d9('af','86nY')](0x24)[_0xa4d9('b0','Lgu(')](0x2,0xa)),Math[_0xa4d9('b1','zLy5')]()[_0xa4d9('a7','vF3p')](0x24)[_0xa4d9('b2','u#SA')](0x2,0xa));if(stk){_0x8b58b5+=_0xa4d9('b3','iDRW')+_0x1b1d7b[_0xa4d9('b4','hVD2')](encodeURIComponent,stk);}return{'url':_0x8b58b5,'headers':{'Host':_0x1b1d7b[_0xa4d9('b5','dL(b')],'Cookie':cookie,'accept':_0x1b1d7b[_0xa4d9('b6','szhE')],'user-agent':_0xa4d9('b7','HIZG')+_0x2664cc+_0xa4d9('b8','@44Q'),'accept-language':_0x1b1d7b[_0xa4d9('b9','&Bc]')],'referer':_0x1b1d7b[_0xa4d9('ba','5vfi')]}};}}});});}function taskurl(_0x4fae9a,_0x40df5d='',_0x57abb8){var _0xaedfd8={'QRUJn':function(_0x124857,_0x247c0a){return _0x124857+_0x247c0a;},'weCFC':function(_0x7e18a1,_0x1af5dd){return _0x7e18a1+_0x1af5dd;},'JbKFy':function(_0x394cdc,_0x57cdf7){return _0x394cdc+_0x57cdf7;},'OvjBL':function(_0x42cda7,_0x5ba673){return _0x42cda7+_0x5ba673;},'BaZzW':function(_0x467e4e,_0x3b03e6){return _0x467e4e===_0x3b03e6;},'nBWHP':'mEbak','jagoQ':function(_0x22f4e5,_0x1371f2){return _0x22f4e5(_0x1371f2);},'dOsEx':_0xa4d9('bb','hVD2'),'HlBDr':'zh-cn','iffjH':_0xa4d9('bc','z#j3')};let _0x3e409f=BASE_URL+'/'+_0x4fae9a+_0xa4d9('bd','z#j3')+_0x40df5d+'&sceneval=2&g_login_type=1&timestamp='+Date[_0xa4d9('be','ZmyU')]()+'&_='+_0xaedfd8[_0xa4d9('bf','zY1E')](Date['now'](),0x2)+_0xa4d9('c0','B2Bq');const _0x32b055=_0xaedfd8[_0xa4d9('c1','pVu7')](_0xaedfd8[_0xa4d9('c2','zLy5')](_0xaedfd8['JbKFy'](_0xaedfd8[_0xa4d9('c3','Io0o')](Math[_0xa4d9('c4','fWXZ')]()[_0xa4d9('c5','zY1E')](0x24)[_0xa4d9('c6','s]$w')](0x2,0xa),Math[_0xa4d9('c7','9zSg')]()['toString'](0x24)[_0xa4d9('c8','V#7^')](0x2,0xa)),Math['random']()[_0xa4d9('c9','ZmyU')](0x24)[_0xa4d9('ca','WMhX')](0x2,0xa)),Math[_0xa4d9('cb','zY1E')]()[_0xa4d9('cc','xOp!')](0x24)['slice'](0x2,0xa)),Math[_0xa4d9('cd','vF3p')]()[_0xa4d9('c5','zY1E')](0x24)[_0xa4d9('ce','w%I2')](0x2,0xa));_0x3e409f+=_0xa4d9('cf','8I(1')+_0x32b055;_0x3e409f+=_0xa4d9('d0','z#j3')+_0xaedfd8[_0xa4d9('d1','@]ai')](_0xaedfd8[_0xa4d9('d2','dL(b')](Math[_0xa4d9('d3','nAsW')]()[_0xa4d9('a1','7u%g')](0x24)[_0xa4d9('d4','pVu7')](0x2,0xa)+Math['random']()[_0xa4d9('d5','5vfi')](0x24)['slice'](0x2,0xa),Math[_0xa4d9('d6','8I(1')]()[_0xa4d9('d7','yBE&')](0x24)[_0xa4d9('d8','r2sy')](0x2,0xa)),Math[_0xa4d9('d9','s]$w')]()[_0xa4d9('a7','vF3p')](0x24)[_0xa4d9('da','dJEE')](0x2,0xa));if(_0x57abb8){if(_0xaedfd8[_0xa4d9('db','Lgu(')]('mEbak',_0xaedfd8['nBWHP'])){_0x3e409f+=_0xa4d9('dc','9zSg')+_0xaedfd8['jagoQ'](encodeURIComponent,_0x57abb8);}else{console[_0xa4d9('dd','9zSg')]('\x0a'+$[_0xa4d9('de','4DdK')]+':\x20\x20API查询请求失败\x20‼️‼️');$[_0xa4d9('df','dRs1')](err);}}return{'url':_0x3e409f,'headers':{'Host':_0xa4d9('e0','&Bc]'),'Cookie':cookie,'accept':_0xaedfd8[_0xa4d9('e1','vF3p')],'user-agent':_0xa4d9('e2','yBE&')+_0x32b055+_0xa4d9('e3','zY1E'),'accept-language':_0xaedfd8[_0xa4d9('e4','vry8')],'referer':_0xaedfd8['iffjH']}};};_0xodH='jsjiami.com.v6';



function TotalBean() {
  return new Promise(async resolve => {
    const options = {
      url: "https://me-api.jd.com/user_new/info/GetJDUserInfoUnion",
      headers: {
        Host: "me-api.jd.com",
        Accept: "*/*",
        Connection: "keep-alive",
        Cookie: cookie,
        "User-Agent":  "jdapp;iPhone;9.4.4;14.3;network/4g;Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148;supportJDSHWK/1",
        "Accept-Language": "zh-cn",
        "Referer": "https://home.m.jd.com/myJd/newhome.action?sceneval=2&ufc=&",
        "Accept-Encoding": "gzip, deflate, br"
      }
    }
    $.get(options, (err, resp, data) => {
      try {
        if (err) {
          $.logErr(err)
        } else {
          if (data) {
            data = JSON.parse(data);
            if (data['retcode'] === "1001") {
              $.isLogin = false; //cookie过期
              return;
            }
            if (data['retcode'] === "0" && data.data && data.data.hasOwnProperty("userInfo")) {
              $.nickName = data.data.userInfo.baseInfo.nickname;
            }
          } else {
            $.log('京东服务器返回空数据');
          }
        }
      } catch (e) {
        $.logErr(e)
      } finally {
        resolve();
      }
    })
  })
}

// prettier-ignore
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`\ud83d\udd14${this.name}, \u5f00\u59cb!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),a={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(a,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t){let e={"M+":(new Date).getMonth()+1,"d+":(new Date).getDate(),"H+":(new Date).getHours(),"m+":(new Date).getMinutes(),"s+":(new Date).getSeconds(),"q+":Math.floor(((new Date).getMonth()+3)/3),S:(new Date).getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,((new Date).getFullYear()+"").substr(4-RegExp.$1.length)));for(let s in e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r)));let h=["","==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="];h.push(e),s&&h.push(s),i&&h.push(i),console.log(h.join("\n")),this.logs=this.logs.concat(h)}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t.stack):this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}